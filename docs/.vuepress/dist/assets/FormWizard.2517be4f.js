import{_ as C,o as n,c as l,g as d,b as o,n as h,h as T,t as b,i as u,r as _,F as B,j as E,k as v,l as f,m as g,a as y,w as S,d as I}from"./app.466b15ae.js";const P={},V={class:"wizard-btn",tabindex:"-1",type:"button"};function A(t,e,a,r,c,i){return n(),l("button",V,[d(t.$slots,"default")])}const N=C(P,[["render",A],["__file","WizardButton.vue"]]),F={name:"wizard-step",props:{tab:{type:Object,default:()=>{}},transition:{type:String,default:""},index:{type:Number,default:0}},computed:{iconActiveStyle(){return{backgroundColor:this.tab.color}},stepCheckedStyle(){return{borderColor:this.tab.color}},errorStyle(){return{borderColor:this.tab.errorColor,backgroundColor:this.tab.errorColor}},stepTitleStyle(){return{color:this.tab.validationError?this.tab.errorColor:this.tab.color}},isStepSquare(){return this.tab.shape==="square"},isTabShape(){return this.tab.shape==="tab"}}},L=["tabindex","id","aria-controls","aria-disabled","aria-selected"],W={key:1,class:"wizard-icon"},K={key:1,class:"wizard-icon"};function R(t,e,a,r,c,i){return n(),l("li",{class:h({active:a.tab.active})},[o("a",{href:"javascript:void(0)",class:h({disabled:!a.tab.checked})},[o("div",{class:h(["wizard-icon-circle md",{checked:a.tab.checked,square_shape:i.isStepSquare,tab_shape:i.isTabShape}]),role:"tab",tabindex:a.tab.checked?0:"",id:`step-${a.tab.tabId}`,"aria-controls":a.tab.tabId,"aria-disabled":a.tab.active,"aria-selected":a.tab.active,style:T([a.tab.checked?i.stepCheckedStyle:{},a.tab.validationError?i.errorStyle:{}])},[a.tab.active?(n(),l("div",{key:0,class:h(["wizard-icon-container",{square_shape:i.isStepSquare,tab_shape:i.isTabShape}]),style:T([a.tab.active?i.iconActiveStyle:{},a.tab.validationError?i.errorStyle:{}])},[d(t.$slots,"active-step",{},()=>[a.tab.icon?(n(),l("i",{key:0,class:h([a.tab.icon,"wizard-icon"])},null,2)):(n(),l("i",W,b(a.index+1),1))])],6)):u("v-if",!0),a.tab.active?u("v-if",!0):d(t.$slots,"default",{key:1},()=>[!a.tab.active&&a.tab.icon?(n(),l("i",{key:0,class:h([a.tab.icon,"wizard-icon"])},null,2)):u("v-if",!0),!a.tab.active&&!a.tab.icon?(n(),l("i",K,b(a.index+1),1)):u("v-if",!0)])],14,L),d(t.$slots,"title",{},()=>[o("span",{class:h(["stepTitle",{active:a.tab.active,has_error:a.tab.validationError}]),style:T(a.tab.active?i.stepTitleStyle:{})},b(a.tab.title),7)])],2)],2)}const q=C(F,[["render",R],["__file","WizardStep.vue"]]);function O(){return document.activeElement.id}function z(t=[]){let e=O();return t.findIndex(r=>r.tabId===e)}function k(t){document.getElementById(t).focus()}function j(t){return t.then&&typeof t.then=="function"}const D={name:"form-wizard",components:{WizardButton:N,WizardStep:q},props:{id:{type:String,default:"fw_"+new Date().valueOf()},title:{type:String,default:"Awesome Wizard"},subtitle:{type:String,default:"Split a complicated flow in multiple steps"},nextButtonText:{type:String,default:"Next"},backButtonText:{type:String,default:"Back"},finishButtonText:{type:String,default:"Finish"},hideButtons:{type:Boolean,default:!1},validateOnBack:Boolean,color:{type:String,default:"#e74c3c"},errorColor:{type:String,default:"#8b0000"},shape:{type:String,default:"circle"},layout:{type:String,default:"horizontal"},stepsClasses:{type:[String,Array],default:""},stepSize:{type:String,default:"md",validator:t=>["xs","sm","md","lg"].indexOf(t)!==-1},transition:{type:String,default:""},startIndex:{type:Number,default:0,validator:t=>t>=0}},provide(){return{addTab:this.addTab,removeTab:this.removeTab}},data(){return{activeTabIndex:0,currentPercentage:0,maxStep:0,loading:!1,tabs:[]}},computed:{slotProps(){return{nextTab:this.nextTab,prevTab:this.prevTab,activeTabIndex:this.activeTabIndex,isLastStep:this.isLastStep,fillButtonStyle:this.fillButtonStyle}},tabCount(){return this.tabs.length},isLastStep(){return this.activeTabIndex===this.tabCount-1},isVertical(){return this.layout==="vertical"},displayPrevButton(){return this.activeTabIndex!==0},stepPercentage(){return 1/(this.tabCount*2)*100},progressBarStyle(){return{backgroundColor:this.color,width:`${this.progress}%`,color:this.color}},fillButtonStyle(){return{backgroundColor:this.color,borderColor:this.color,color:"white"}},progress(){let t=0;if(this.activeTabIndex>0){let e=1,a=2;t=this.stepPercentage*(this.activeTabIndex*a+e)}else t=this.stepPercentage;return t}},methods:{emitTabChange(t,e){this.$emit("on-change",t,e),this.$emit("update:startIndex",e)},addTab(t){console.log(t.$vnode),console.log(this.$.slots);const e=1;t.tabId=`${t.title.replace(/ /g,"")}${e}`,this.tabs.splice(e,0,t),e<this.activeTabIndex+1&&(this.maxStep=e,this.changeTab(this.activeTabIndex+1,e))},removeTab(t){const e=this.tabs,a=e.indexOf(t);a>-1&&(a===this.activeTabIndex&&(this.maxStep=this.activeTabIndex-1,this.changeTab(this.activeTabIndex,this.activeTabIndex-1)),a<this.activeTabIndex&&(this.maxStep=this.activeTabIndex-1,this.activeTabIndex=this.activeTabIndex-1,this.emitTabChange(this.activeTabIndex+1,this.activeTabIndex)),e.splice(a,1))},reset(){this.maxStep=0,this.tabs.forEach(t=>{t.checked=!1}),this.navigateToTab(0)},activateAll(){this.maxStep=this.tabs.length-1,this.tabs.forEach(t=>{t.checked=!0})},navigateToTab(t){let e=t>this.activeTabIndex;if(t<=this.maxStep){let a=()=>{e&&t-this.activeTabIndex>1?(this.changeTab(this.activeTabIndex,this.activeTabIndex+1),this.beforeTabChange(this.activeTabIndex,a)):(this.changeTab(this.activeTabIndex,t),this.afterTabChange(this.activeTabIndex))};e?this.beforeTabChange(this.activeTabIndex,a):(this.setValidationError(null),a())}return t<=this.maxStep},nextTab(){let t=()=>{this.activeTabIndex<this.tabCount-1?(this.changeTab(this.activeTabIndex,this.activeTabIndex+1),this.afterTabChange(this.activeTabIndex)):this.$emit("on-complete")};this.beforeTabChange(this.activeTabIndex,t)},prevTab(){let t=()=>{this.activeTabIndex>0&&(this.setValidationError(null),this.changeTab(this.activeTabIndex,this.activeTabIndex-1))};this.validateOnBack?this.beforeTabChange(this.activeTabIndex,t):t()},focusNextTab(){let t=z(this.tabs);if(t!==-1&&t<this.tabs.length-1){let e=this.tabs[t+1];e.checked&&k(e.tabId)}},focusPrevTab(){let t=z(this.tabs);if(t!==-1&&t>0){let e=this.tabs[t-1].tabId;k(e)}},setLoading(t){this.loading=t,this.$emit("on-loading",t)},setValidationError(t){this.tabs[this.activeTabIndex].validationError=t,this.$emit("on-error",t)},validateBeforeChange(t,e){if(this.setValidationError(null),j(t))this.setLoading(!0),t.then(a=>{this.setLoading(!1);let r=a===!0;this.executeBeforeChange(r,e)}).catch(a=>{this.setLoading(!1),this.setValidationError(a)});else{let a=t===!0;this.executeBeforeChange(a,e)}},executeBeforeChange(t,e){this.$emit("on-validate",t,this.activeTabIndex),t?e():this.tabs[this.activeTabIndex].validationError="error"},beforeTabChange(t,e){if(this.loading)return;let a=this.tabs[t];if(a&&a.beforeChange!==void 0){let r=a.beforeChange();this.validateBeforeChange(r,e)}else e()},afterTabChange(t){if(this.loading)return;let e=this.tabs[t];e&&e.afterChange!==void 0&&e.afterChange()},changeTab(t,e,a=!0){let r=this.tabs[t],c=this.tabs[e];return r&&(r.active=!1),c&&(c.active=!0),a&&this.activeTabIndex!==e&&this.emitTabChange(t,e),this.activeTabIndex=e,this.activateTabAndCheckStep(this.activeTabIndex),!0},tryChangeRoute(t){this.$router&&t.route&&this.$router.push(t.route)},checkRouteChange(t){let e=-1,a=this.tabs.find((r,c)=>{let i=r.route===t;return i&&(e=c),i});if(a&&!a.active){const r=e>this.activeTabIndex;this.navigateToTab(e,r)}},deactivateTabs(){this.tabs.forEach(t=>{t.active=!1})},activateTab(t){this.deactivateTabs();let e=this.tabs[t];e&&(e.active=!0,e.checked=!0,this.tryChangeRoute(e))},activateTabAndCheckStep(t){this.activateTab(t),t>this.maxStep&&(this.maxStep=t),this.activeTabIndex=t},initializeTabs(){this.tabs.length>0&&this.startIndex===0&&this.activateTab(this.activeTabIndex),this.startIndex<this.tabs.length?this.activateTabAndCheckStep(this.startIndex):window.console.warn(`Prop startIndex set to ${this.startIndex} is greater than the number of tabs - ${this.tabs.length}. Make sure that the starting index is less than the number of tabs registered`)}},mounted(){this.initializeTabs()},watch:{"$route.path"(t){this.checkRouteChange(t)}}},M=["id"],G={key:0,class:"wizard-header"},H={class:"wizard-title"},J={class:"category"},Q={class:"wizard-navigation"},U={key:0,class:"wizard-progress-with-circle"},X={class:"wizard-tab-content"},Y={key:1,class:"wizard-card-footer clearfix"},Z={class:"wizard-footer-left"},$={class:"wizard-footer-right"};function tt(t,e,a,r,c,i){const w=_("wizard-step"),m=_("wizard-button");return n(),l("div",{id:a.id?a.id:"",class:h(["vue-form-wizard",[a.stepSize,{vertical:i.isVertical}]]),onKeyup:[e[6]||(e[6]=g((...s)=>i.focusNextTab&&i.focusNextTab(...s),["right"])),e[7]||(e[7]=g((...s)=>i.focusPrevTab&&i.focusPrevTab(...s),["left"]))]},[t.$slots.title?(n(),l("div",G,[d(t.$slots,"title",{},()=>[o("h4",H,b(a.title),1),o("p",J,b(a.subtitle),1)])])):u("v-if",!0),o("div",Q,[i.isVertical?u("v-if",!0):(n(),l("div",U,[o("div",{class:"wizard-progress-bar",style:T(i.progressBarStyle)},null,4)])),o("ul",{class:h(["wizard-nav wizard-nav-pills",a.stepsClasses]),role:"tablist"},[(n(!0),l(B,null,E(c.tabs,(s,x)=>d(t.$slots,"step",{tab:s,index:x,navigateToTab:i.navigateToTab,stepSize:a.stepSize,transition:a.transition},()=>[y(w,{tab:s,"step-size":a.stepSize,onClick:p=>i.navigateToTab(x),onKeyup:g(p=>i.navigateToTab(x),["enter"]),transition:a.transition,index:x},null,8,["tab","step-size","onClick","onKeyup","transition","index"])])),256))],2),o("div",X,[d(t.$slots,"default",v(f(i.slotProps)))])]),a.hideButtons?u("v-if",!0):(n(),l("div",Y,[d(t.$slots,"footer",v(f(i.slotProps)),()=>[o("div",Z,[i.displayPrevButton?(n(),l("span",{key:0,onClick:e[0]||(e[0]=(...s)=>i.prevTab&&i.prevTab(...s)),onKeyup:e[1]||(e[1]=g((...s)=>i.prevTab&&i.prevTab(...s),["enter"])),role:"button",tabindex:"0"},[d(t.$slots,"prev",v(f(i.slotProps)),()=>[y(m,{style:T(i.fillButtonStyle),disabled:c.loading},{default:S(()=>[I(b(a.backButtonText),1)]),_:1},8,["style","disabled"])])],32)):u("v-if",!0),d(t.$slots,"custom-buttons-left",v(f(i.slotProps)))]),o("div",$,[d(t.$slots,"custom-buttons-right",v(f(i.slotProps))),i.isLastStep?(n(),l("span",{key:0,onClick:e[2]||(e[2]=(...s)=>i.nextTab&&i.nextTab(...s)),onKeyup:e[3]||(e[3]=g((...s)=>i.nextTab&&i.nextTab(...s),["enter"])),role:"button",tabindex:"0"},[d(t.$slots,"finish",v(f(i.slotProps)),()=>[y(m,{style:T(i.fillButtonStyle)},{default:S(()=>[I(b(a.finishButtonText),1)]),_:1},8,["style"])])],32)):(n(),l("span",{key:1,onClick:e[4]||(e[4]=(...s)=>i.nextTab&&i.nextTab(...s)),onKeyup:e[5]||(e[5]=g((...s)=>i.nextTab&&i.nextTab(...s),["enter"])),role:"button",tabindex:"0"},[d(t.$slots,"next",v(f(i.slotProps)),()=>[y(m,{style:T(i.fillButtonStyle),disabled:c.loading},{default:S(()=>[I(b(a.nextButtonText),1)]),_:1},8,["style","disabled"])])],32))])])]))],42,M)}const at=C(D,[["render",tt],["__file","FormWizard.vue"]]);export{at as default};
